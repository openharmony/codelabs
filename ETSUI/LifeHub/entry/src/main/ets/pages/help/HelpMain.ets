/*
 * Copyright (c) 2026 Huawei Device Co., Ltd.
 * Licensed under the Apache License,Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * å¸®åŠ©å’Œæ•™ç¨‹é¡µé¢
 */

interface HelpItem {
  title: string;
  content: string;
  icon: string;
  category: string;
}

@Entry
@Component
export struct HelpMain {
  @State helpItems: HelpItem[] = [
    {
      title: 'å¿«é€Ÿå¼€å§‹',
      content: 'LifeHubæ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„ä¸ªäººç”Ÿæ´»ç®¡ç†åº”ç”¨ã€‚é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆæ·»åŠ ä¸€äº›åŸºç¡€æ•°æ®ï¼Œå¦‚å¥åº·è®°å½•ã€ç›®æ ‡ç­‰ã€‚',
      icon: 'ğŸš€',
      category: 'å…¥é—¨'
    },
    {
      title: 'å¥åº·è®°å½•',
      content: 'åœ¨å¥åº·æ¨¡å—ä¸­ï¼Œä½ å¯ä»¥è®°å½•ä½“é‡ã€è¡€å‹ã€è¡€ç³–ã€è¿åŠ¨æ—¶é•¿å’Œç¡çœ æ—¶é—´ã€‚å»ºè®®æ¯å¤©è®°å½•ï¼Œä»¥ä¾¿è¿½è¸ªå¥åº·è¶‹åŠ¿ã€‚',
      icon: 'ğŸ’š',
      category: 'å¥åº·'
    },
    {
      title: 'ç›®æ ‡ç®¡ç†',
      content: 'åˆ›å»ºç›®æ ‡æ—¶ï¼Œå»ºè®®å°†å¤§ç›®æ ‡åˆ†è§£ä¸ºå°ä»»åŠ¡ï¼Œå¹¶è®¾ç½®åˆç†çš„æˆªæ­¢æ—¥æœŸã€‚å®šæœŸæ›´æ–°è¿›åº¦ï¼Œä¿æŒåŠ¨åŠ›ã€‚',
      icon: 'ğŸ¯',
      category: 'ç›®æ ‡'
    },
    {
      title: 'å¿ƒæƒ…è®°å½•',
      content: 'æ¯å¤©è®°å½•å¿ƒæƒ…å¯ä»¥å¸®åŠ©ä½ äº†è§£æƒ…ç»ªå˜åŒ–ã€‚å»ºè®®åœ¨å›ºå®šæ—¶é—´è®°å½•ï¼Œå¦‚æ¯å¤©æ™šä¸Šã€‚',
      icon: 'ğŸ˜Š',
      category: 'å¿ƒæƒ…'
    },
    {
      title: 'æŠ€èƒ½å­¦ä¹ ',
      content: 'æ·»åŠ æŠ€èƒ½åï¼Œå¯ä»¥è¿½è¸ªå­¦ä¹ è¿›åº¦ã€‚å»ºè®®è®¾ç½®ç›®æ ‡ç­‰çº§ï¼Œå¹¶å®šæœŸæ›´æ–°å½“å‰ç­‰çº§ã€‚',
      icon: 'ğŸ“š',
      category: 'å­¦ä¹ '
    },
    {
      title: 'æ—…è¡Œè§„åˆ’',
      content: 'åˆ›å»ºæ—…è¡Œè®¡åˆ’æ—¶ï¼Œå¯ä»¥è®¾ç½®é¢„ç®—å’Œå®é™…èŠ±è´¹ï¼Œå¸®åŠ©æ§åˆ¶æ—…è¡Œå¼€æ”¯ã€‚',
      icon: 'âœˆï¸',
      category: 'æ—…è¡Œ'
    },
    {
      title: 'æ—¥è®°åŠŸèƒ½',
      content: 'å†™æ—¥è®°æ—¶å¯ä»¥è®°å½•å¿ƒæƒ…ã€æ·»åŠ æ ‡ç­¾ã€‚å»ºè®®å®šæœŸå›é¡¾æ—¥è®°ï¼Œäº†è§£ç”Ÿæ´»å˜åŒ–ã€‚',
      icon: 'ğŸ“',
      category: 'æ—¥è®°'
    },
    {
      title: 'æ•°æ®ç»Ÿè®¡',
      content: 'åœ¨ç»Ÿè®¡é¡µé¢å¯ä»¥æŸ¥çœ‹å„æ¨¡å—çš„è¯¦ç»†æ•°æ®å’Œåˆ†æã€‚å¸®åŠ©äº†è§£ç”Ÿæ´»è¶‹åŠ¿å’Œæ¨¡å¼ã€‚',
      icon: 'ğŸ“Š',
      category: 'ç»Ÿè®¡'
    },
    {
      title: 'ç»Ÿä¸€æœç´¢',
      content: 'ä½¿ç”¨æœç´¢åŠŸèƒ½å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ‰€æœ‰æ¨¡å—çš„æ•°æ®ã€‚æ”¯æŒå…³é”®è¯æœç´¢æ ‡é¢˜ã€å†…å®¹ç­‰ã€‚',
      icon: 'ğŸ”',
      category: 'æœç´¢'
    },
    {
      title: 'æˆå°±ç³»ç»Ÿ',
      content: 'å®Œæˆå„ç§ä»»åŠ¡å¯ä»¥è§£é”æˆå°±å¾½ç« ã€‚æŸ¥çœ‹æˆå°±ç³»ç»Ÿäº†è§£å¦‚ä½•è§£é”æ›´å¤šæˆå°±ã€‚',
      icon: 'ğŸ†',
      category: 'æˆå°±'
    },
    {
      title: 'æ•°æ®å¤‡ä»½',
      content: 'å®šæœŸå¤‡ä»½æ•°æ®å¯ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚å»ºè®®æ¯å‘¨å¤‡ä»½ä¸€æ¬¡ï¼Œä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹ã€‚',
      icon: 'ğŸ“¦',
      category: 'å¤‡ä»½'
    },
    {
      title: 'æé†’åŠŸèƒ½',
      content: 'è®¾ç½®æé†’å¯ä»¥å¸®åŠ©ä½ å…»æˆè®°å½•ä¹ æƒ¯ã€‚å¯ä»¥è®¾ç½®æ¯å¤©ã€å·¥ä½œæ—¥æˆ–å‘¨æœ«æé†’ã€‚',
      icon: 'â°',
      category: 'æé†’'
    },
    {
      title: 'æ ‡ç­¾ç®¡ç†',
      content: 'ä½¿ç”¨æ ‡ç­¾å¯ä»¥æ›´å¥½åœ°åˆ†ç±»å’Œç®¡ç†æ•°æ®ã€‚åœ¨è®°å½•æ—¶æ·»åŠ æ ‡ç­¾ï¼Œæ–¹ä¾¿åç»­æŸ¥æ‰¾ã€‚',
      icon: 'ğŸ·ï¸',
      category: 'æ ‡ç­¾'
    },
    {
      title: 'ç”Ÿæ´»æŠ¥å‘Š',
      content: 'ç”Ÿæˆå‘¨æŠ¥æˆ–æœˆæŠ¥å¯ä»¥äº†è§£ä¸€æ®µæ—¶é—´å†…çš„ç”Ÿæ´»æƒ…å†µã€‚æŠ¥å‘ŠåŒ…å«å„æ¨¡å—çš„ç»Ÿè®¡å’Œåˆ†æã€‚',
      icon: 'ğŸ“„',
      category: 'æŠ¥å‘Š'
    }
  ];
  @State selectedCategory: string = 'å…¨éƒ¨';
  @State expandedItems: Set<number> = new Set();
  private categories =
    ['å…¨éƒ¨', 'å…¥é—¨', 'å¥åº·', 'ç›®æ ‡', 'å¿ƒæƒ…', 'å­¦ä¹ ', 'æ—…è¡Œ', 'æ—¥è®°', 'ç»Ÿè®¡', 'æœç´¢', 'æˆå°±', 'å¤‡ä»½', 'æé†’', 'æ ‡ç­¾',
      'æŠ¥å‘Š'];

  build() {
    Column() {
      // æ ‡é¢˜æ 
      Row() {
        Text('å¸®åŠ©ä¸­å¿ƒ')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)

        Blank()
      }
      .width('100%')
      .padding(20)
      .backgroundColor('#f0f0f0')

      // åˆ†ç±»ç­›é€‰
      Scroll() {
        Row() {
          ForEach(this.categories, (category: string) => {
            Button(category)
              .fontSize(14)
              .height(36)
              .backgroundColor(this.selectedCategory === category ? '#007DFF' : '#f0f0f0')
              .fontColor(this.selectedCategory === category ? Color.White : '#666')
              .borderRadius(18)
              .margin({ right: 10 })
              .onClick(() => {
                this.selectedCategory = category;
              })
          })
        }
        .width('100%')
        .padding({
          left: 15,
          right: 15,
          top: 10,
          bottom: 10
        })
      }
      .scrollBar(BarState.Auto)
      .scrollable(ScrollDirection.Horizontal)

      // å¸®åŠ©åˆ—è¡¨
      Scroll() {
        Column() {
          ForEach(this.getFilteredItems(), (item: HelpItem, index: number) => {
            this.buildHelpItem(item, index)
          })
        }
        .width('100%')
        .padding(15)
      }
      .layoutWeight(1)
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#f5f5f5')
  }

  @Builder
  buildHelpItem(item: HelpItem, index: number) {
    Column() {
      Row() {
        Text(item.icon)
          .fontSize(32)
          .width(50)

        Column() {
          Text(item.title)
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#333')
            .textAlign(TextAlign.Start)
            .width('100%')

          Row() {
            Text(item.category)
              .fontSize(12)
              .fontColor('#666')
              .padding({
                left: 8,
                right: 8,
                top: 4,
                bottom: 4
              })
              .backgroundColor('#f0f0f0')
              .borderRadius(10)
          }
          .width('100%')
          .margin({ top: 5 })
        }
        .layoutWeight(1)
        .alignItems(HorizontalAlign.Start)
        .padding({ left: 15 })

        Text(this.expandedItems.has(index) ? 'â–²' : 'â–¼')
          .fontSize(16)
          .fontColor('#999')
      }
      .width('100%')
      .onClick(() => {
        if (this.expandedItems.has(index)) {
          this.expandedItems.delete(index);
        } else {
          this.expandedItems.add(index);
        }
      })

      if (this.expandedItems.has(index)) {
        Text(item.content)
          .fontSize(14)
          .fontColor('#666')
          .lineHeight(24)
          .textAlign(TextAlign.Start)
          .width('100%')
          .margin({ top: 15, left: 65 })
      }
    }
    .width('100%')
    .padding(15)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .margin({ bottom: 10 })
  }

  getFilteredItems(): HelpItem[] {
    if (this.selectedCategory === 'å…¨éƒ¨') {
      return this.helpItems;
    }
    return this.helpItems.filter(item => item.category === this.selectedCategory);
  }
}
