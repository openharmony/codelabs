/*
 * Copyright (c) 2025 Huawei Device Co., Ltd.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { PreferenceService } from '../services/PreferenceService';
import { Logger } from '../common/utils/Logger';

export class SettingModel {
  private logger = new Logger('SettingModel');
  private readonly KEY_BIOMETRIC_ENABLE = 'is_biometric_enabled';

  /**
   * è¯»å–çŠ¶æ€
   */
  async isBiometricEnabled(): Promise<boolean> {
    // å¼ºåˆ¶è·å–æœåŠ¡å®ä¾‹
    const service = PreferenceService.getInstance();

    // è¯»å–å€¼ï¼Œé»˜è®¤ä¸º false
    const value = await service.getValue<boolean>(this.KEY_BIOMETRIC_ENABLE, false);

    this.logger.info(`ğŸ” [Model] è¯»å–ç”Ÿç‰©è®¤è¯çŠ¶æ€: ${value}`);
    return value;
  }

  /**
   * ä¿å­˜çŠ¶æ€
   */
  async setBiometricEnabled(isEnabled: boolean): Promise<void> {
    this.logger.info(`ğŸ’¾ [Model] æ­£åœ¨ä¿å­˜çŠ¶æ€: ${isEnabled}`);

    // å†™å…¥å¹¶å¼ºåˆ¶åˆ·æ–°
    await PreferenceService.getInstance().putValue(this.KEY_BIOMETRIC_ENABLE, isEnabled);

    this.logger.info(` [Model] ä¿å­˜å®Œæˆ`);
  }
}